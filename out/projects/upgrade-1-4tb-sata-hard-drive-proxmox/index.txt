1:"$Sreact.fragment"
2:I[9304,["542","static/chunks/542-9c169102c7286aba.js","651","static/chunks/651-e2b53cfd6ab14c6d.js","838","static/chunks/838-83c262eea6b250cb.js","52","static/chunks/52-dc2ebebf60073ec5.js","309","static/chunks/309-3e43f9b66d438df9.js","945","static/chunks/945-2a14fe9ed70b235a.js","916","static/chunks/916-d000ae8515890a43.js","794","static/chunks/794-40a14984f3a6b1a7.js","177","static/chunks/app/layout-020809086aa700bb.js"],"ThemeProvider"]
3:I[9241,["542","static/chunks/542-9c169102c7286aba.js","651","static/chunks/651-e2b53cfd6ab14c6d.js","838","static/chunks/838-83c262eea6b250cb.js","52","static/chunks/52-dc2ebebf60073ec5.js","309","static/chunks/309-3e43f9b66d438df9.js","945","static/chunks/945-2a14fe9ed70b235a.js","916","static/chunks/916-d000ae8515890a43.js","794","static/chunks/794-40a14984f3a6b1a7.js","177","static/chunks/app/layout-020809086aa700bb.js"],"CyberHeader"]
4:I[7555,[],""]
5:I[1295,[],""]
6:I[1024,["542","static/chunks/542-9c169102c7286aba.js","838","static/chunks/838-83c262eea6b250cb.js","345","static/chunks/app/not-found-f26a84874965db45.js"],"default"]
7:I[3063,["542","static/chunks/542-9c169102c7286aba.js","651","static/chunks/651-e2b53cfd6ab14c6d.js","838","static/chunks/838-83c262eea6b250cb.js","52","static/chunks/52-dc2ebebf60073ec5.js","309","static/chunks/309-3e43f9b66d438df9.js","945","static/chunks/945-2a14fe9ed70b235a.js","916","static/chunks/916-d000ae8515890a43.js","794","static/chunks/794-40a14984f3a6b1a7.js","177","static/chunks/app/layout-020809086aa700bb.js"],"Image"]
8:I[6874,["542","static/chunks/542-9c169102c7286aba.js","651","static/chunks/651-e2b53cfd6ab14c6d.js","838","static/chunks/838-83c262eea6b250cb.js","52","static/chunks/52-dc2ebebf60073ec5.js","309","static/chunks/309-3e43f9b66d438df9.js","945","static/chunks/945-2a14fe9ed70b235a.js","916","static/chunks/916-d000ae8515890a43.js","794","static/chunks/794-40a14984f3a6b1a7.js","177","static/chunks/app/layout-020809086aa700bb.js"],""]
a:I[9665,[],"OutletBoundary"]
d:I[9665,[],"ViewportBoundary"]
f:I[9665,[],"MetadataBoundary"]
11:I[6614,[],""]
:HL["/_next/static/css/78204a441d290532.css","style"]
:HL["/_next/static/css/b5c3a1bf19425f6c.css","style"]
0:{"P":null,"b":"ueOktod6GdedqcxtLheow","p":"","c":["","projects","upgrade-1-4tb-sata-hard-drive-proxmox",""],"i":false,"f":[[["",{"children":["projects",{"children":[["slug","upgrade-1-4tb-sata-hard-drive-proxmox","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/78204a441d290532.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/b5c3a1bf19425f6c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":[["$","head",null,{"children":["$","script",null,{"defer":true,"src":"https://cloud.umami.is/script.js","data-website-id":"1c0f224c-1fe0-4093-a4e2-c43cb8c84bfa"}]}],["$","body",null,{"className":"__className_f367f3","children":["$","$L2",null,{"attribute":"class","defaultTheme":"light","disableTransitionOnChange":true,"children":["$","div",null,{"className":"flex min-h-screen flex-col","children":[["$","$L3",null,{}],["$","main",null,{"className":"flex-1 pt-16","children":["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","$L6",null,{}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"bg-background py-5 border-t border-border","children":["$","div",null,{"className":"container mx-auto px-4 md:px-6","children":[["$","div",null,{"className":"grid grid-cols-1 md:grid-cols-3 gap-4","children":[["$","div",null,{"className":"space-y-2","children":[["$","div",null,{"className":"flex items-center","children":["$","div",null,{"className":"relative w-[3.6rem] h-[3.6rem]","children":["$","$L7",null,{"src":"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/117%20Corporation%20no%20bg-5VVBXF0igK8jcCo43su7cpA2isco7t.png","alt":"117 SECOPS Logo","fill":true,"className":"object-contain"}]}]}],["$","p",null,{"className":"text-sm text-muted-foreground max-w-xs","children":"Cybersecurity professional specializing in protecting digital assets from evolving threats."}],["$","div",null,{"className":"pt-0","children":["$","a",null,{"href":"https://www.linkedin.com/in/otori-samson/","target":"_blank","rel":"noopener noreferrer","children":"Contact Me","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-9 rounded-md px-3 cyber-border bg-transparent text-foreground hover:bg-purple-600 hover:text-white","ref":null}]}]]}],["$","div",null,{"children":[["$","h3",null,{"className":"font-medium text-sm mb-2 text-foreground","children":"Quick Links"}],["$","ul",null,{"className":"space-y-0.5","children":[["$","li",null,{"children":["$","$L8",null,{"href":"/","className":"text-sm text-muted-foreground hover:text-primary","children":"Home"}]}],["$","li",null,{"children":["$","$L8",null,{"href":"/blog","className":"text-sm text-muted-foreground hover:text-primary","children":"Blog"}]}],["$","li",null,{"children":["$","$L8",null,{"href":"/projects","className":"text-sm text-muted-foreground hover:text-primary","children":"Projects"}]}],["$","li",null,{"children":["$","$L8",null,{"href":"/portfolio","className":"text-sm text-muted-foreground hover:text-primary","children":"Portfolio"}]}],["$","li",null,{"children":["$","$L8",null,{"href":"/about","className":"text-sm text-muted-foreground hover:text-primary","children":"About"}]}]]}]]}],["$","div",null,{"children":[["$","h3",null,{"className":"font-medium text-sm mb-2 text-foreground","children":"Areas of Expertise"}],["$","ul",null,{"className":"space-y-0.5","children":[["$","li",null,{"className":"text-sm text-muted-foreground","children":"Security Assessment"}],["$","li",null,{"className":"text-sm text-muted-foreground","children":"Penetration Testing"}],["$","li",null,{"className":"text-sm text-muted-foreground","children":"Secure Development"}],["$","li",null,{"className":"text-sm text-muted-foreground","children":"Incident Response"}],["$","li",null,{"className":"text-sm text-muted-foreground","children":"Compliance"}]]}]]}]]}],["$","div",null,{"className":"border-t border-border mt-5 pt-3 flex flex-col md:flex-row justify-between items-center","children":["$","p",null,{"className":"text-sm text-muted-foreground","children":["© ",2025," Samson's. Personal cybersecurity portfolio."]}]}]]}]}]]}]}]}]]}]]}],{"children":["projects",["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","upgrade-1-4tb-sata-hard-drive-proxmox","d"],["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L9","$undefined",null,["$","$La",null,{"children":["$Lb","$Lc",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","ZrI8xqFtgrb78h8XAay--",{"children":[["$","$Ld",null,{"children":"$Le"}],null]}],["$","$Lf",null,{"children":"$L10"}]]}],false]],"m":"$undefined","G":["$11","$undefined"],"s":false,"S":true}
12:I[2238,["542","static/chunks/542-9c169102c7286aba.js","651","static/chunks/651-e2b53cfd6ab14c6d.js","838","static/chunks/838-83c262eea6b250cb.js","842","static/chunks/842-e0e5a1d477d9d65d.js","150","static/chunks/150-c359029d3b689678.js","419","static/chunks/app/projects/%5Bslug%5D/page-41cd4d27245b4b70.js"],"default"]
13:T9c8,
## Installing a 4TB SATA Hard Drive in My Proxmox Server

### Overview

To expand my Proxmox VE bare-metal server's storage, I installed a 4TB SATA 3.5" hard drive. Although the hardware was correctly connected, the drive initially failed to appear in Proxmox or in the system's disk utilities. This write-up documents how I diagnosed and resolved the issue.

### Initial Symptoms

After physically installing the drive with both SATA power and data cables connected to the motherboard, the system did not detect the disk. Tools like `lsblk`, `fdisk -l`, and the Proxmox GUI showed no sign of it.

Despite this, the drive was powered—audibly spinning—and `dmesg` logs showed that SATA link negotiation occurred at 6.0 Gbps. However, there was no device registered as `/dev/sdX`, suggesting a failure in initialization.

### Diagnostic Process

I confirmed the SATA cable and power lines were functional by testing them with other working drives. Swapping ports on the motherboard yielded no change. BIOS settings were inspected to confirm that AHCI mode was enabled and that all SATA ports were active.

I then tested the drive using a USB-to-SATA adapter. While a smaller 2.5" drive was successfully detected through the adapter, the 3.5" drive failed to power up correctly—implying insufficient power delivery via USB.

### Resolution

A full system reboot with the drive plugged into a known-good SATA port allowed proper detection. Upon restart, the disk appeared in `fdisk -l` and `lsblk` as `/dev/sdX`.

With the device now detected, I wiped previous signatures using `wipefs -a`, then formatted it using `mkfs.ext4`. I mounted the drive under `/mnt/4tbdrive` and added the appropriate entry to `/etc/fstab` for persistence.

### Conclusion

This issue highlighted how a drive may appear to function at the hardware level while still failing OS-level detection due to incomplete initialisation. A simple reboot can often trigger proper enumeration. It's a reminder to combine physical verification with system-level diagnostics and to never overlook the importance of full reboots in hardware troubleshooting.

### CREDIT

This project was independently researched, designed, and implemented by me, Samson Otori, as part of my hands-on journey in cybersecurity.

---

**Tags:** #Proxmox #Storage #Hardware #SATA #Linux #SystemAdministration #Troubleshooting #Infrastructure #Homelab #HardwareUpgrade #StorageExpansion #ProxmoxVE #BareMetal #DiskManagement 14:T1f83,
## Segmenting My Cybersecurity Homelab Using VLANs

After completing the initial build of my cybersecurity homelab, I knew the next big milestone was network segmentation. I wanted to separate my environment into distinct VLANs for better traffic control, improved security, and a more organized deployment of my tools and virtual machines. The concept was simple in theory, separate traffic logically while maintaining complete control from a single pane.

My initial spark for this came from Gerard O'Brien, whose breakdown of homelab network segmentation introduced me to the idea of creating isolated VLANs for each category of devices or services. It made perfect sense: isolate your security tools, isolate vulnerable machines, isolate test environments, all while routing through a central firewall. Along the way, I hit several roadblocks. That's where Koroma Tech came in. His YouTube series covered VLAN segmentation using OPNsense, Cisco switches, and Proxmox, the exact gear I had. His breakdown helped untangle many of the issues I ran into and became an invaluable guide during troubleshooting.

## Initial Vision

I began with a vision of building an enterprise-style segmented lab. The goal was to use OPNsense as my central router and firewall, Proxmox to host all VMs, and a Cisco switch to trunk the VLANs across the environment. I planned four main VLANs:

A VLAN for security tools, which would house platforms like Wazuh and TheHive. A separate VLAN for vulnerable machines, which I could target with Kali Linux and test detection pipelines. Another VLAN would be reserved for a Windows environment, where I could simulate real endpoints and domain controllers. Finally, I wanted a VLAN for Docker containers, to explore containerized security tools and microservices.

All of this was connected by a Cisco SG500X-24 switch, a Proxmox server with multiple bonded NICs, and an OPNsense firewall running on a dedicated thin client. Internet was shared into the lab via Ethernet from a laptop using a Wi-Fi uplink, serving as a temporary ISP connection.

## Configuring the Cisco Switch

The first step was to configure VLANs on the Cisco switch. Inside the VLAN Management interface, I created VLANs 1 (default), 5, 10, 20, and 30. I used port GE1 as the trunk port connected to the Proxmox server and port GE2 as the uplink to the OPNsense firewall.

Trunking configuration was critical. GE1 needed to be tagged for VLANs 5, 10, 20, and 30. This would allow Proxmox to forward VLAN-tagged traffic into the switch and out toward the firewall. Cisco switches, however, require each port to have one untagged VLAN. I initially attempted to remove all untagged VLANs but was met with an error. It turns out VLAN 1 must remain as the untagged VLAN by default. I left it in place and tagged the rest.

Ports assigned to VM-specific devices were configured as access ports, tagged only for their respective VLANs. For example, GE5 might be an access port for VLAN 20 (Windows), and GE6 for VLAN 10 (Kali Linux).

## VLAN Interface Setup in OPNsense

On the OPNsense firewall, the VLAN interfaces were built on top of the physical NIC (RE2) connected to the Cisco switch. For each VLAN, I created a corresponding virtual interface, such as RE2_vlan20 for VLAN 20, and then assigned it inside the OPNsense GUI.

Each VLAN interface was given a static IP address, for example, 10.10.20.1/24 for VLAN 20, and a DHCP server was configured to assign IPs within that range. I added basic allow-all rules in the firewall for each VLAN subnet to ensure traffic could flow during testing. One misstep I encountered was related to firewall rules: DHCP leases weren't being issued at first, and I later discovered that a deny rule was taking precedence above my allow rule. Once I reordered them, DHCP worked flawlessly.

## Bridging and Bonding in Proxmox

This was one of the trickiest parts of the build. My Proxmox server had three network interfaces, enp10s0, enp9s0, and enp6s0, which were originally bonded into a single interface, bond0. This bond0 wasn't attached to vmbr0, my default Linux bridge, which wasn't VLAN-aware.

Inspired by Koroma Tech's video, I thought I needed to separate one NIC and create a new Linux bridge, vmbr1, for the VLANs. I detached enp6s0 from the bond and attached it to vmbr1. This led to chaos: Proxmox VMs could no longer reach the internet, static IPs weren't being assigned, DHCP requests failed, and the web interface became intermittently unreachable. I had to access the server via shell and manually fix /etc/network/interfaces. A simple ifreload -a command even took the network down temporarily.

The realization hit after consulting Koroma Tech and rewatching his video (Thanks for his response): I never needed a second bridge. The original vmbr0, was to be made to point to bond0, and that would have been perfectly capable of handling VLAN-tagged traffic, provided the VLAN-aware checkbox was enabled, which I eventually did. So I reverted everything. I re-added enp6s0 to the bond, reset the bridge to vmbr0, and things began to work.

## Assigning VLANs to VMs in Proxmox

With vmbr0 correctly configured, the next step was assigning VLAN tags to the VMs. In each VM configuration, I went to Hardware → Network Device, edited the NIC, and added the VLAN tag that matched the desired segment. For instance, the Windows VM was given VLAN 20, Kali got VLAN 10, and my Docker VM received VLAN 30.

Once this was done, I rebooted the VMs and ran ipconfig or ifconfig to verify the network settings. To my satisfaction, each VM pulled the correct IP address from its respective VLAN subnet, configured on OPNsense and trunked through the Cisco switch.

## The Debugging Journey

I ran into every possible issue: Proxmox network down, static IP not picked, DHCP not working, OPNsense not receiving traffic, and even Cisco switch ports refusing certain configs. I spent hours running packet captures on OPNsense to see if DHCP DISCOVER packets were even hitting the firewall, in many cases, they weren't, due to tagging or misassigned switch ports.

It wasn't until I fully understood how each layer, Proxmox, the switch, and OPNsense, handled tagged traffic that things started to align. The concept of trunk ports, access ports, tagging at the VM level, VLAN-aware bridges, and proper interface assignment all had to be in perfect harmony.

## Conclusion

This project pushed me. I'm proud of how it turned out, not just because everything is now working, but because I truly understand the system I built. VLANs are no longer just theory to me. I've lived the chaos, the packet loss, the empty DHCP leases, and the recovery.

Massive thanks to Gerard O'Brien for the foundational inspiration and to Koroma Tech for the actionable guidance and video breakdowns that helped me debug when things went south. He even took time to respond to my messages, and that helped keep me grounded.

If you're reading this and planning to segment your own lab: take it slow, understand each component, and know that breaking things is part of the journey. My next steps will be building services like Wazuh, TheHive, and Arkime inside their respective VLANs, and expanding the lab even further, now with a proper backbone in place.

Credits: This project was independently implemented by Samson Otori, with conceptual inspiration from Gerard O'Brien and valuable technical guidance from Koroma Tech, whose content and support were instrumental in shaping and troubleshooting the VLAN segmentation setup.

Here's a link to their YouTube channels:
- [Gerard O'Brien's Channel](https://www.youtube.com/@techwithgerard)
- [Koroma Tech Channel](https://www.youtube.com/@KoromaTech)

---

**Tags:** #VLAN #NetworkSegmentation #OPNsense #CiscoSwitch #Proxmox #Infrastructure #Homelab #Cybersecurity #NetworkSecurity #Virtualization #Firewall #DHCP #Trunking #AccessPorts #VLANAware #NetworkConfiguration #SecurityTools #WindowsEnvironment #KaliLinux #DockerContainers 15:T16a3,
## Levelling Up: From VirtualBox to a Full Hardware Cybersecurity Home Lab (Project V117)

If there's one thing that's been both my playground as a cybersecurity enthusiast, it's my home lab. I didn't just throw hardware together, I engineered a mini datacenter that lets me break things, fix them, and build skills that go beyond the classroom or certification paths.

So let me walk you through how I set it all up, from network design, hardware choices, and wiring, to the virtual machines running inside.

## The Blueprint

Before buying a single cable, I sat down and mapped out what I needed:
- A solid core network
- A powerful, reliable server
- A firewall/router to control traffic
- A proper switch to interconnect everything
- And most importantly: internet access without having to buy a new broadband plan

## The Physical Stack

Here's the physical breakdown of what I used:

### The Switch
At the heart of my lab sits a Cisco SG500X-24, a 24-port managed switch with RJ45 1GbE ports. This switch gives me full control over VLANs, trunking, port security, and QoS, which is perfect for mimicking enterprise-level setups. I got this because later in future I plan to manually configure VLANs for different zones (e.g., management, attack, internal, DMZ), so I could isolate traffic and simulate real-world networks.

### The Server
Then comes my main server, which I affectionately call the Node-V117.
- CPU: Intel Xeon E5-2689 (8 cores, 16 threads)
- RAM: 64 GB ECC (Error Correcting Code)
- Storage: 3 SSDs for fast I/O
- GPU: NVIDIA Quadro card, mostly used for potential GPU passthrough and future ML experiments

This beast runs Proxmox VE, a Type-1 hypervisor that gives me the power to run several virtual machines and containers. If you're serious about virtualisation, Proxmox is the real deal.

### The OPNsense Firewall
For routing and security experimentation, I installed OPNsense on an HP T730 Thin Client. It's a sleek, fanless device that runs silently and comes equipped with a dual 2.5GbE NIC, perfect for future networking experiments. I configured the interfaces for WAN (connected to my laptop for internet) and LAN (connected to the switch), giving me complete control over firewall rules, NAT, and traffic shaping. Right now, it's sitting in place and connected, ready to be the core of my network security setup when I begin more advanced testing.

## The Wiring and Internet Hack

One of the most interesting parts of my setup was getting the entire homelab online, without a dedicated internet line. For now, I bridged my laptop's internet connection to the firewall as a temporary workaround. It works for basic connectivity and testing, but I'm already seeing its limitations in bandwidth, stability, and accessibility. Eventually, I plan to set up a dedicated internet line for the lab to unlock more advanced use cases, such as remote access, persistent services, and uninterrupted updates.

Here's how I did it:

1. Laptop Internet Sharing
   - My laptop connects to Wi-Fi
   - I shared this connection through the Ethernet port using Windows' Internet Sharing feature

2. Cable Run
   - I plugged an Ethernet cable from the laptop into the WAN port of the HP T730 running OPNsense

3. Firewall Setup
   - In OPNsense, I configured the WAN interface to get an IP via DHCP (coming from the laptop)
   - Then set the LAN IP range (e.g., 192.168.100.1/24) and turned on DHCP for internal devices

4. Switch Cabling
   - The LAN port of the firewall connects to port 1 on the Cisco switch
   - My server's NIC connects to port 2
   - The remaining ports were available for VMs or any other device I want to simulate

## Virtual Machines

On Proxmox, I spun up multiple VMs, each serving a different purpose:
- Windows 10 & 11: For endpoint security testing, malware analysis, and AD simulations
- Ubuntu Server: Hosting lightweight services, honeypots, and ELK stack
- Kali Linux: My offensive workstation, preloaded with tools like Burp Suite, Metasploit, and Nmap

Later, as I expand my knowledge, I would place each VM on its own VLAN or subnet, and intentionally misconfigure some for security testing, because what's a lab without vulnerabilities?

## Use Cases and Next Steps

With this lab, I can:
- Simulate red vs. blue team scenarios
- Build and monitor logs from Windows endpoints
- Train with SIEM tools like Wazuh
- Set up phishing simulations and response workflows
- Test firewall rules, intrusion detection, and segmentation

The plan is to keep building on this, maybe add Active Directory, integrate SOAR tools like Shuffle(which I'm already working on currently), and even try deploying a Kubernetes cluster on Ubuntu.

## Conclusion

Setting up this lab wasn't just about putting hardware together, it was about creating an environment where I could think like an attacker, build like an engineer, and defend like a blue teamer. Every time I boot up a VM, I'm building muscle memory for real-world problem solving.

If you're thinking of building your own lab, start small but think big. And don't wait for the perfect setup. I started out running labs in VirtualBox, just trying to get a feel for the tools and workflows. But eventually, I knew I needed to experience real hardware and full network environments. So I made this work, with shared internet and repurposed gear. It's not about perfection; it's about progress.

Got questions or thinking of building your own lab? I'd be happy to chat or help, just click on the "Contact Me" button anywhere on this site to reach out to me on LinkedIn. 

*NOTE: This project was independently researched, designed, and implemented by me, Samson Otori, as part of my hands-on journey in cybersecurity.* 16:T1c86,
## Project 4.4: Integrating Wazuh SIEM/XDR and Nessus in a Cybersecurity Home Lab

### Building the SIEM Foundation: Wazuh Server Deployment

Continuing from the previous episodes of my cybersecurity home lab journey, I entered the next to introduce Wazuh as the SIEM and XDR solution for telemetry collection, log correlation, and detection engineering. I provisioned a new Ubuntu server virtual machine on Proxmox with 4 vCPUs, 8GB of RAM, and 160GB of disk space, ensuring it resided within VLAN 5 (my security tools network) using the IP 10.10.5.51/24. The Wazuh installation process was straightforward. After setting a static IP and configuring DNS and gateway entries, I initiated a basic update and upgrade cycle, then ran the official Wazuh installation script from their GitHub repository.

Once the installation was completed, I accessed the Wazuh dashboard via HTTPS at https://10.10.5.51, authenticated using the auto-generated credentials, and confirmed a successful deployment. With the Wazuh manager operational, the next step was deploying agents across key systems in the lab.

<InlineGallery images={wazuh-server-deployment} title="Wazuh Server Deployment" />

### Deploying Agents: Parrot OS and Docker Server Integration

The first endpoint I configured was my Parrot OS. I elevated to root and ran the prescribed commands to add the Wazuh repository, perform an update, and install the agent. I edited the agent configuration to point it at the Wazuh manager IP and verified connectivity. Upon launching the agent, it registered on the Wazuh dashboard and began transmitting logs shortly after.

I replicated the same process on my Ubuntu Docker server (10.10.30.100), again ensuring root privileges, repository addition, and agent configuration. I initiated the agent and confirmed its visibility on the Wazuh interface. To extend observability into containerised environments, I proceeded to install the Wazuh Docker Listener and configured the Docker API for telemetry ingestion. I appended the required JSON configuration into the agent's config file, restarted the service, and enabled the module on the Wazuh dashboard under Settings > Modules > Docker Listener. Container-level logs began appearing as I restarted a few test containers to validate.

<InlineGallery images={agent-installation} title="Agent Installation Process" />

### OPNsense Firewall Agent Issues: Encountering the PID File Roadblock

With both endpoint systems operational in Wazuh, I turned my attention to integrating my OPNsense firewall (192.168.1.1) running on dedicated hardware. This step diverged significantly from the Linux-based agents, as it required enabling FreeBSD repositories and handling configuration in a constrained BSD environment. I SSHed into OPNsense, enabled SSH under System > Advanced, and modified the FreeBSD.conf file to set enabled=YES. Unlike the tutorial, I found only the freebsd.conf file available, not pfsense.conf, due to architectural differences between OPNsense and pfSense.

Following the installation instructions, I attempted to run the agent-auth binary to register the agent with the manager. However, I encountered a persistent error: agent-auth: CRITICAL (1212): Unable to create PID file. This indicated a permission or filesystem-level issue preventing the Wazuh agent from properly initialising. Further troubleshooting revealed that the ossec user and group did not exist by default. Attempts to assign ownership using chown -R ossec:ossec /var/ossec returned "illegal group name" errors.

I manually verified write permissions by creating and removing test files under /var/ossec, which confirmed basic functionality. Despite that, the Wazuh agent daemon (wazuh-agentd) consistently failed to start. Configuration and log file reviews pointed to missing or incompatible startup routines specific to FreeBSD. I eventually confirmed that even after enabling FreeBSD package support and properly configuring ossec.conf to include the manager IP, the agent appeared on the Wazuh dashboard but failed to show "Active" status.

At this point, I decided to temporarily pause work on the OPNsense agent integration. The issue remained unresolved, likely due to deeper compatibility mismatches or required kernel parameters not present on the OPNsense BSD environment. I plan to revisit this with a custom-built FreeBSD agent installation script or by manually creating missing users and startup routines. But if anyone has encountered this issue, please reach out to me with suggestions, I'll really appreciate.

<InlineGallery images={opnsense-setup} title="OPNsense Firewall Configuration" />

### Deploying Nessus: Introducing Vulnerability Scanning to the Lab

With the SIEM side in partial production, I progressed to deploying Nessus for vulnerability scanning. I created a new Ubuntu VM on Proxmox with 4 vCPUs, 4 GB RAM, and 40 GB disk, assigning it the IP address 10.10.5.52/24 within VLAN 5. After configuring static networking and enabling SSH, I logged in and ran the commands to download the latest Nessus Debian package. I installed it using dpkg and started the nessusd service.

Accessing Nessus via the browser at https://10.10.5.52:8834 allowed me to register for the Essentials version and input the activation key. The platform then began downloading its full set of plugins and signature files. Once installation was completed, I created a quick scan targeting the Metasploitable2 VM. Even with the basic scan template, the results after the scan show that it was successful even with limited information, confirming its functionality.

<InlineGallery images={nessus-deployment} title="Nessus Vulnerability Scanner Setup" />

### Conclusion

At this point, I had a partially complete security monitoring stack within my home lab. Wazuh was successfully collecting logs from my Parrot OS and Docker machines and even parsing Docker container activity. Nessus was active and ready to scan targets across VLAN 5. However, OPNsense integration remained incomplete due to agent startup issues tied to BSD permission handling. I plan to circle back to this issue later with a deeper understanding of BSD service management or possibly using Syslog forwarding as a temporary workaround.

This project showcases the real-world challenges of building a hybrid monitoring environment, integrating both Linux and BSD-based systems into a centralised SIEM. It's a valuable case study for anyone deploying Wazuh in a segmented network and dealing with heterogeneous operating systems. My next step will be to document the resolution of the OPNsense agent issue and expand Wazuh's use to include alert rule tuning and dashboard customisation.

Stay tuned for the next stage of this project as we integrate more detection and response tools.

**Credits:** This walkthrough is based on Episode 3 of the Ultimate Cybersecurity Lab YouTube series by Gerard O'Brien. While the steps closely followed his guidance, the project was independently implemented by Samson Otori, with custom network configurations and host assignments tailored to fit a pre-existing VLAN-segmented lab environment.

Here's a link to his YouTube channels:

[Gerard O'Brien's Channel](https://www.youtube.com/watch?v=ytWZ6OrFEQE&list=PL3ljjyal211AbTqlxSo6CGBiVqsXw8wrp&index=9) 9:["$","$L12",null,{"projectData":{"slug":"upgrade-1-4tb-sata-hard-drive-proxmox","title":"Upgrade 1: Installing a 4TB SATA Hard Drive in My Proxmox Server","description":"A detailed walkthrough of expanding Proxmox VE storage with a 4TB SATA drive, including troubleshooting detection issues and proper system integration.","date":"2025-07-18","author":"Samson Otori","client":"Personal Project","challenge":"","solution":"","results":[],"category":"Infrastructure","tags":["Proxmox","Storage","Hardware","SATA","Linux","System Administration","Troubleshooting","Infrastructure","Homelab"],"content":"$13","image":"/images/projects/hardware-lab/20250712_133828.jpg","technologies":[],"images":[{"src":"/images/projects/hardware-lab/20250712_133903.jpg","alt":"4TB SATA hard drive installation process"},{"src":"/images/projects/hardware-lab/20250712_133922.jpg","alt":"Hardware connection verification"},{"src":"/images/projects/hardware-lab/20250712_141335.jpg","alt":"System detection troubleshooting"},{"src":"/images/projects/hardware-lab/20250712_133957.jpg","alt":"Drive mounting and configuration"},{"src":"/images/projects/hardware-lab/20250712_141450.jpg","alt":"Final system integration"},{"src":"/images/projects/hardware-lab/New 4 TB HArd drive.png","alt":"New 4TB hard drive overview"}],"series":{"name":"Upgrade 1: Installing a 4TB SATA Hard Drive in My Proxmox Server","part":1,"totalParts":1}},"relatedProjects":[{"slug":"vlans-segmentation-homelab","title":"Segmenting My Cybersecurity Homelab Using VLANs","description":"A detailed walkthrough of implementing VLAN segmentation in my cybersecurity homelab using OPNsense, Cisco switches, and Proxmox for better traffic control and security isolation.","date":"2025-06-29","author":"Samson Otori","client":"Personal Project","challenge":"","solution":"","results":[],"category":"Infrastructure","tags":["VLAN","Network Segmentation","OPNsense","Cisco Switch","Proxmox","Infrastructure","Homelab"],"content":"$14","image":"/images/projects/hardware-lab/home-lab-image.jpeg","technologies":[],"images":[{"src":"/images/projects/hardware-lab/Homelab Project V117.png","alt":"Homelab Project V117 Overview"},{"src":"/images/projects/hardware-lab/Navigating to VLAN Management and VLAN Setting in Cisco Switch.png","alt":"Navigating to VLAN Management and VLAN Setting in Cisco Switch"},{"src":"/images/projects/hardware-lab/Adding new VLAN rule in cisco switch.png","alt":"Adding new VLAN rule in cisco switch"},{"src":"/images/projects/hardware-lab/Trying to set up Port VLAN Membership.png","alt":"Trying to set up Port VLAN Membership"},{"src":"/images/projects/hardware-lab/Assigning Trunk and access VLANs to Infrastructure and physical ports or system.png","alt":"Assigning Trunk and access VLANs to Infrastructure and physical ports or system"},{"src":"/images/projects/hardware-lab/Setting PVID Primary VLAN ID of Physical Parrot OS and Windows OS to ensure Untagged traffic is treated as part of that VLAN.png","alt":"Setting PVID Primary VLAN ID of Physical Parrot OS and Windows OS to ensure Untagged traffic is treated as part of that VLAN"},{"src":"/images/projects/hardware-lab/Navigating to create VLAN Interface on OPNSense.png","alt":"Navigating to create VLAN Interface on OPNSense"},{"src":"/images/projects/hardware-lab/Creating VLAN Interface on OPNSense.png","alt":"Creating VLAN Interface on OPNSense"},{"src":"/images/projects/hardware-lab/Assigning Interface on OPNSense.png","alt":"Assigning Interface on OPNSense"},{"src":"/images/projects/hardware-lab/Interface Assigned on OPNSense firewall.png","alt":"Interface Assigned on OPNSense firewall"},{"src":"/images/projects/hardware-lab/chatgpt.png","alt":"ChatGPT assistance"},{"src":"/images/projects/hardware-lab/Setting up Static IPs and DHCP For all Interface.png","alt":"Setting up Static IPs and DHCP For all Interface"},{"src":"/images/projects/hardware-lab/Enabling DHCP Server for static IP.png","alt":"Enabling DHCP Server for static IP"},{"src":"/images/projects/hardware-lab/DHCP Set for all Static IPs.png","alt":"DHCP Set for all Static IPs"},{"src":"/images/projects/hardware-lab/Creating Firewall rules for Each Interface.png","alt":"Creating Firewall rules for Each Interface"},{"src":"/images/projects/hardware-lab/Adding Firewall rules for first Interface.png","alt":"Adding Firewall rules for first Interface"},{"src":"/images/projects/hardware-lab/Firewall rules Added for all Interface.png","alt":"Firewall rules Added for all Interface"},{"src":"/images/projects/hardware-lab/Creating new linux bridge.png","alt":"Creating new linux bridge"},{"src":"/images/projects/hardware-lab/Configuring VLAN In Proxmox to Make it VLAN Aware.png","alt":"Configuring VLAN In Proxmox to Make it VLAN Aware"},{"src":"/images/projects/hardware-lab/Configuring VM interface with VLAN Tags on Proxmox.png","alt":"Configuring VM interface with VLAN Tags on Proxmox"},{"src":"/images/projects/hardware-lab/Kali on proxmox now having internet.png","alt":"Kali on proxmox now having internet"},{"src":"/images/projects/hardware-lab/Windows 10 on proxmox having internet access.png","alt":"Windows 10 on proxmox having internet access"},{"src":"/images/projects/hardware-lab/running ip show link on proxmox to know how to go about creating linux bridge.png","alt":"Running ip show link on proxmox to know how to go about creating linux bridge"},{"src":"/images/projects/hardware-lab/CHATGPTSHELL.png","alt":"ChatGPT shell assistance"}],"series":{"name":"Project 4.1: VLANs Segmentation In My Homelab","part":1,"totalParts":1}},{"slug":"building-full-hardware-cybersecurity-homelab","title":"Building a Full Hardware Cybersecurity Home Lab","description":"A comprehensive guide on transitioning from VirtualBox to building a fully equipped hardware cybersecurity home lab, complete with network design, hardware choices, and virtual machine configurations.","date":"2025-05-15","author":"Samson Otori","client":"Personal Project","challenge":"","solution":"","results":[],"category":"Infrastructure","tags":["Home Lab","Hardware","Networking","Infrastructure","Virtualization"],"content":"$15","image":"/images/projects/project 4.jpg","technologies":[],"images":[{"src":"/images/projects/hardware-lab/1-router.jpg","alt":"Router Configuration - Initial Setup"},{"src":"/images/projects/hardware-lab/2-router.jpg","alt":"Router Configuration - Network Settings"},{"src":"/images/projects/hardware-lab/3-router.jpg","alt":"Router Configuration - Final Setup"},{"src":"/images/projects/hardware-lab/4-switch.jpg","alt":"Switch Installation - Hardware View"},{"src":"/images/projects/hardware-lab/5-switch.jpg","alt":"Switch Configuration - Port Setup"},{"src":"/images/projects/hardware-lab/6-server.jpg","alt":"Server Hardware - Front View"},{"src":"/images/projects/hardware-lab/7-server.jpg","alt":"Server Hardware - Internal Components"},{"src":"/images/projects/hardware-lab/8-devices-connection.png","alt":"Network Devices Connection Diagram"},{"src":"/images/projects/hardware-lab/9-connection.jpg","alt":"Physical Network Connections - Setup 1"},{"src":"/images/projects/hardware-lab/10-connection.jpg","alt":"Physical Network Connections - Setup 2"},{"src":"/images/projects/hardware-lab/11-connection.jpg","alt":"Physical Network Connections - Setup 3"},{"src":"/images/projects/hardware-lab/12-connection.jpg","alt":"Physical Network Connections - Setup 4"},{"src":"/images/projects/hardware-lab/13-setup.jpg","alt":"Complete Lab Setup - View 1"},{"src":"/images/projects/hardware-lab/14-setup.jpg","alt":"Complete Lab Setup - View 2"},{"src":"/images/projects/hardware-lab/15-proxmox.png","alt":"Proxmox VE - Installation"},{"src":"/images/projects/hardware-lab/16-proxmox.png","alt":"Proxmox VE - Configuration"},{"src":"/images/projects/hardware-lab/17-proxmox.png","alt":"Proxmox VE - VM Setup"},{"src":"/images/projects/hardware-lab/18-proxmox.png","alt":"Proxmox VE - Network Configuration"},{"src":"/images/projects/hardware-lab/19-OPNSense.png","alt":"OPNSense Firewall Dashboard"},{"src":"/images/projects/hardware-lab/20-switch.png","alt":"Switch Management Interface"}],"series":{"name":"Project 4: Building a Full Hardware Cybersecurity Home Lab","part":1,"totalParts":1}},{"slug":"project-4-4-wazuh-nessus-integration","title":"Project 4.4: Integrating Wazuh SIEM/XDR and Nessus in a Cybersecurity Home Lab","description":"A comprehensive walkthrough of deploying Wazuh SIEM/XDR for log correlation and Nessus for vulnerability scanning in a segmented cybersecurity homelab environment.","date":"2025-08-03","author":"Samson Otori","client":"Personal Project","challenge":"","solution":"","results":[],"category":"blue","tags":["Wazuh","SIEM","XDR","Nessus","Vulnerability Scanning","Security Monitoring","OPNsense","Docker","Parrot OS","Ubuntu","Proxmox","VLAN","Homelab","Blue Team"],"content":"$16","image":"/images/projects/hardware-lab/Image-header-for-project-4.4.jpeg","technologies":[],"images":[],"series":{"name":"Project 4.4: Integrating Wazuh SIEM/XDR and Nessus in a Cybersecurity Home Lab","part":1,"totalParts":1}}],"categoryCounts":{"blue":45,"Infrastructure":3,"red":1}}]
e:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
b:null
c:null
10:[["$","title","0",{"children":"Samson's | Cybersecurity Portfolio"}],["$","meta","1",{"name":"description","content":"Professional cybersecurity portfolio showcasing expertise in digital security"}],["$","meta","2",{"name":"generator","content":"v0.dev"}],["$","link","3",{"rel":"icon","href":"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/117%20Corporation%20no%20bg-5VVBXF0igK8jcCo43su7cpA2isco7t.png"}]]
